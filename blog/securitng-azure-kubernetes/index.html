<!doctype html><html><head><meta charset=utf-8><title>Best practices for securing your Azure Kubernetes Service deployment</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://acethecloud.com/themify/themify.css><link href=https://acethecloud.com/scss/critical.min.css rel=stylesheet><link rel=stylesheet href=https://acethecloud.com/css/custom.css><link rel="shortcut icon" href=https://acethecloud.com/images/favicon.png type=image/x-icon><link rel=icon href=https://acethecloud.com/images/favicon.png type=image/x-icon><script async src="https://www.googletagmanager.com/gtag/js?id=G-54XSTRSXS5"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-54XSTRSXS5")</script></head><body><nav class="main-nav navbar navbar-expand-lg"><div class=container-fluid><a class=navbar-brand href=https://acethecloud.com><img class=logo-main src=https://acethecloud.com/images/logo.png alt=logo-white></a>
<button class="navbar-toggler collapsed" type=button data-toggle=collapse data-target=#mainNav>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button><div class="collapse navbar-collapse nav-list" id=mainNav><ul class="navbar-nav ml-auto"><li class=nav-item><a href=https://acethecloud.com#hero class=nav-link>Home</a></li><li class=nav-item><a href=https://acethecloud.com#faq class=nav-link>Clouds</a></li><li class=nav-item><a href=https://acethecloud.com/contact class=nav-link>Contact</a></li></ul><div class="account-list list-inline"><li class=list-inline-item><a href=https://acethecloud.com/blog class="btn btn-sm btn-violate">Blog</a></li></div></div></div></nav><div id=content><meta property="og:image" content="https://acethecloud.com/images/blog/aks-k8s.png"><meta property="og:image:type" content="image/png"><section class="page-header blog-single-header"><div class=container><div class=row><div class=col-lg-12><h2>Best practices for securing your Azure Kubernetes Service deployment</h2><div class=post-meta><img src=https://acethecloud.com/images/blog/aks-k8s.png style=margin-left:-30px;width:390px alt=feature-image></div><div class=post-meta><ul><li><img src=https://acethecloud.com/images/client/abhishek.png alt=author-thumb><h5>Abhishek</h5></li><li></li><li><b>Date Posted</b><br>December 15, 2022</li><li></li><li><b>Read Time</b> :<br>4 minutes</li></ul><br><div style=scroll-behavior:auto><ul><li class=tag><b>Topics ⇢</b></li><li class=tag><a href=https://acethecloud.com/tags/kubernetes/>kubernetes</a></li><li class=tag><a href=https://acethecloud.com/tags/azure/>azure</a></li><li class=tag><a href=https://acethecloud.com/tags/security/>security</a></li><li class=tag><a href=https://acethecloud.com/tags/containers/>containers</a></li><li class=tag><a href=https://acethecloud.com/tags/devops/>devops</a></li></ul></div></div></div></div></div></section><section class=blog-single><div class=container style=width:100%><div style=width:100%><article class=blog-single-post style=padding:30px><p>Securing your Azure Kubernetes Service (AKS) deployment is crucial to ensure the confidentiality, integrity, and availability of your applications and data. In this blog post, we will explore some best practices for securing your AKS deployment.</p><p><strong>1. Use Azure AD for authentication and authorization</strong> . Azure AD provides centralized identity and access management for your AKS cluster. You can use Azure AD to authenticate users and grant them access to the cluster and its resources. To set up Azure AD integration, follow the steps in the <a href=https://learn.microsoft.com/en-us/azure/aks/azure-ad-integration-cli>official documentation</a>.</p><p><strong>2. Enable network security policies</strong> . Network security policies allow you to define rules to control inbound and outbound traffic to and from your AKS cluster. You can use network security policies to segment your network and restrict access to certain resources. To set up network security policies, follow the steps in the <a href=https://learn.microsoft.com/en-us/azure/aks/use-network-policies>official documentation</a>.</p><p>Here is an example of a network security policy that allows inbound traffic from the Internet to the frontend service, but only if the traffic is coming from a specific IP range:</p><div class=highlight><div style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#062873;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>networking.k8s.io/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>kind</span>:<span style=color:#bbb> </span>NetworkPolicy<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>name</span>:<span style=color:#bbb> </span>frontend-policy<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#062873;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>podSelector</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>matchLabels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#062873;font-weight:700>app</span>:<span style=color:#bbb> </span>frontend<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>ingress</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#062873;font-weight:700>from</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- <span style=color:#062873;font-weight:700>ipBlock</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#062873;font-weight:700>cidr</span>:<span style=color:#bbb> </span><span style=color:#40a070>123.45.67.89</span>/32<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#062873;font-weight:700>ports</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- <span style=color:#062873;font-weight:700>protocol</span>:<span style=color:#bbb> </span>TCP<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>          </span><span style=color:#062873;font-weight:700>port</span>:<span style=color:#bbb> </span><span style=color:#40a070>80</span><span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>3. Use Azure Private Link to secure communication between your AKS cluster and other Azure services</strong> . Azure Private Link provides a secure and scalable way to access Azure services over a private network connection.
You can use Private Link to access services such as Azure Storage, Azure SQL Database, and Azure Cosmos DB from your AKS cluster without exposing them to the public Internet. To set up Private Link, follow the steps in the <a href=https://learn.microsoft.com/en-in/azure/aks/private-clusters>official documentation</a>.</p><p><strong>4. Enable Azure AD Pod Identity</strong> . Azure AD Pod Identity allows you to bind Azure AD identities to pods in your AKS cluster, enabling them to access Azure resources securely. This can be particularly useful when deploying microservices that need to access resources such as Azure Storage or Azure SQL Database. To set up Azure AD Pod Identity, follow the steps in the <a href=https://learn.microsoft.com/en-us/azure/aks/use-azure-ad-pod-identity>official documentation</a></p><p><strong>5. Use Microsoft Defender for Containers</strong> . Microsoft Defender for Containers is the cloud-native solution that is used to secure your containers so you can improve, monitor, and maintain the security of your clusters, containers, and their applications. Defender for Containers assists you with the three core aspects of container security:</p><p><strong>- Environment hardening</strong> . Defender for Containers protects your Kubernetes clusters whether they&rsquo;re running on Azure Kubernetes Service, Kubernetes on-premises/IaaS, or Amazon EKS. Defender for Containers continuously assesses clusters to provide visibility into misconfigurations and guidelines to help mitigate identified threats.</p><p><strong>- Vulnerability assessment</strong> . Vulnerability assessment and management tools for images stored in ACR registries and running in Azure Kubernetes Service.</p><p><strong>- Run-time threat protection for nodes and clusters</strong> . Threat protection for clusters and Linux nodes generates security alerts for suspicious activities.</p><p>To learn more about Defender for Containers, follow the steps in the <a href=https://learn.microsoft.com/en-in/azure/defender-for-cloud/defender-for-containers-introduction>official documentation</a></p><h4 id=the-workload-protections-dashboard>The workload protections dashboard</h4><p><img src=/images/blog/workload-protection-dashboard.png alt="Workload Protection Dashbaord"></p><p>The dashboard includes the following sections:</p><p><strong>1. Microsoft Defender for Cloud coverage</strong> - Here you can see the resources types that are in your subscription and eligible for protection by Defender for Cloud. Wherever relevant, you&rsquo;ll have the option to upgrade too. If you want to upgrade all possible eligible resources, select Upgrade all.</p><p><strong>2. Security alerts</strong> - When Defender for Cloud detects a threat in any area of your environment, it generates an alert. These alerts describe details of the affected resources, suggested remediation steps, and in some cases an option to trigger a logic app in response. Selecting anywhere in this graph opens the Security alerts page.</p><p><strong>3. Advanced protection</strong> - Defender for Cloud includes many advanced threat protection capabilities for virtual machines, SQL databases, containers, web applications, your network, and more. In this advanced protection section, you can see the status of the resources in your selected subscriptions for each of these protections. Select any of them to go directly to the configuration area for that protection type.</p><p><strong>4. Insights</strong> - This rolling pane of news, suggested reading, and high priority alerts gives Defender for Cloud&rsquo;s insights into pressing security matters that are relevant to you and your subscription. Whether it&rsquo;s a list of high severity CVEs discovered on your VMs by a vulnerability analysis tool, or a new blog post by a member of the Defender for Cloud team, you&rsquo;ll find it here in the Insights panel.</p><h2 id=case-study>Case Study</h2><p>Here is a fictional case study of how a company hardens their Azure Kubernetes Service (AKS) deployment:</p><p>Acme Inc. is a software development company that recently migrated its applications to AKS. To ensure the security and compliance of their deployment, they decide to implement additional security controls.</p><p>The first step they take is to set up Azure AD integration for their AKS cluster. This allows them to manage access to the cluster and its resources using their existing Azure AD identities. They also set up Azure AD Pod Identity, which enables their microservices to access Azure resources securely using Azure AD identities.</p><p>Next, Acme Inc. enables network security policies for their AKS cluster. They create policies to segment their network and restrict access to certain resources, such as the database and storage containers. They also use Azure Private Link to secure communication between their AKS cluster and other Azure services, such as Azure Storage and Azure SQL Database.</p><p>To monitor and protect their AKS cluster, Acme Inc. sets up Azure Security Center. They configure Security Center to send alerts for security-related events, such as failed logins or resource access violations. They also use Azure Policy to enforce security standards and compliance, such as requiring secure communication protocols and prohibiting the use of certain resource types.</p><p>Finally, Acme Inc. uses Azure Container Registry to store and manage their container images. They use the image scanning and image signing features to ensure the security of their images, and they replicate their images to multiple regions for disaster recovery.</p><p>By implementing these security controls, Acme Inc. is able to harden their AKS deployment and ensure the confidentiality, integrity, and availability of their applications and data. They are also able to meet their compliance requirements and reduce their risk of security breaches.</p></article></div><div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3068198368246884" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block data-ad-client=ca-pub-3068198368246884 data-ad-slot=9807437796 data-ad-format=auto data-full-width-responsive=true></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><div class=container style=padding:50px><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//acethecloud.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></section></div><footer class=footer><div class=container><div class=row><div class=col-lg-12><div class=footer-subscribe-title><h2>Get the latest blog updates</h2></div></div><div class="col-lg-8 mx-auto"><form action=# class=footer-subscribe-form><div class=from-group><div class=input-group><input type=email class=form-control placeholder="Enter Your E-mail"><div class=subscribe><button class="btn btn-subscribe" type=submit>
<span class=btn-area>Subscribe</span><svg class="icon-left" xmlns="http://www.w3.org/2000/svg" width="16.317" height="15.323" viewBox="0 0 16.317 15.323"><g data-name="Group 1167"><g data-name="Group 1166"><path data-name="Path 1349" d="M.004 5.359a.7.7.0 00.587.693l6.091 1.609L.591 9.27a.7.7.0 00-.587.693v4.656a.7.7.0 00.206.5.726.726.0 00.119.1.7.7.0 00.675.044l14.911-6.958a.7.7.0 000-1.274L1.004.066a.7.7.0 00-1 .637zm13.952 2.3" fill="#fff"/></g></g></svg><svg class="icon-center" xmlns="http://www.w3.org/2000/svg" width="16.317" height="15.323" viewBox="0 0 16.317 15.323"><g data-name="Group 1167"><g data-name="Group 1166"><path data-name="Path 1349" d="M.004 5.359a.7.7.0 00.587.693l6.091 1.609L.591 9.27a.7.7.0 00-.587.693v4.656a.7.7.0 00.206.5.726.726.0 00.119.1.7.7.0 00.675.044l14.911-6.958a.7.7.0 000-1.274L1.004.066a.7.7.0 00-1 .637zm13.952 2.3" fill="#fff"/></g></g></svg></button></div></div></div></form></div></div><div class=row><div class="col-lg-4 col-md-4"><div class=footer-description><img src=https://acethecloud.com/images/logo.png alt=logo><p>All right reserved</br>Copyright © <a href=https://AceTheCloud.com/ target=_blank>AceTheCloud</a> 2022</p><ul class=footer-description-social><li><a href=https://facebook.com/cloud.and.mobile.evangelist/><i class=ti-facebook></i></a></li><li><a href=https://twitter.com/AbhiForTweeting><i class=ti-twitter-alt></i></a></li><li><a href=https://github.com/AbhiOnGithub><i class=ti-github></i></a></li></ul></div></div><div class="col-lg-4 col-md-4"><div class=footer-widget><h4>Sitemap</h4><div class=footer-widget-list><ul><li><a href=https://acethecloud.com>Home</a></li><li><a href=https://acethecloud.com/blog>Latest Article</a></li><li><a href=https://acethecloud.com/privacy>Privacy & Policy</a></li><li><a href=https://acethecloud.com/contact>Contact</a></li></ul></div></div></div><div class="col-lg-4 col-md-4"><div class=footer-widget><h4>Address</h4><div class=footer-widget-list><ul><li><a href=tel:><i class=ti-mobile></i></a></li><li><a href=mailto:abhishek@acethecloud.com><i class=ti-email></i>abhishek@acethecloud.com</a></li><li><p><i class=ti-pin></i></p></li></ul></div></div></div></div></div></footer><link href=https://acethecloud.com/scss/non-critical.min.css rel=stylesheet><script src=https://acethecloud.com/js/vendor.min.js></script>
<script src=https://acethecloud.com/js/script.min.js></script></body></html>