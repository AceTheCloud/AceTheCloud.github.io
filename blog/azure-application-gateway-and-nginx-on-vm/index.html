<!doctype html><html><head><meta charset=utf-8><title>Which is better Azure App Gateway or Nginx configured on Azure VMs ðŸ¤œ ðŸ¤›</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://acethecloud.com/themify/themify.css><link href=https://acethecloud.com/scss/critical.min.css rel=stylesheet><link rel=stylesheet href=https://acethecloud.com/css/custom.css><link rel="shortcut icon" href=https://acethecloud.com/images/favicon.png type=image/x-icon><link rel=icon href=https://acethecloud.com/images/favicon.png type=image/x-icon><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3068198368246884" crossorigin=anonymous></script></head><body><nav class="main-nav navbar navbar-expand-lg"><div class=container-fluid><a class=navbar-brand href=https://acethecloud.com><img class=logo-main src=https://acethecloud.com/images/logo.png alt=logo-white></a>
<button class="navbar-toggler collapsed" type=button data-toggle=collapse data-target=#mainNav>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button><div class="collapse navbar-collapse nav-list" id=mainNav><ul class="navbar-nav ml-auto"><li class=nav-item><a href=https://acethecloud.com#hero class=nav-link>Home</a></li><li class=nav-item><a href=https://acethecloud.com#faq class=nav-link>Clouds</a></li><li class=nav-item><a href=https://acethecloud.com/contact class=nav-link>Contact</a></li></ul><div class="account-list list-inline"><li class=list-inline-item><a href=https://acethecloud.com/blog class="btn btn-sm btn-violate">Blog</a></li></div></div></div></nav><div id=content><meta property="og:image" content="https://acethecloud.com/images/blog/appgateway-nginx.png"><meta property="og:image:type" content="image/png"><section class="page-header blog-single-header"><div class=container><div class=row><div class=col-lg-12><h2>Which is better Azure App Gateway or Nginx configured on Azure VMs ðŸ¤œ ðŸ¤›</h2><div class=post-meta><img src=https://acethecloud.com/images/blog/appgateway-nginx.png style=margin-left:-30px;width:390px alt=feature-image></div><div class=post-meta><ul><li><img src=https://acethecloud.com/images/client/abhishek.png alt=author-thumb><h5>Abhishek</h5></li><li></li><li><b>Date Posted</b><br>December 5, 2021</li><li></li><li><b>Read Time</b> :<br>6 minutes</li></ul><br><div style=scroll-behavior:auto><ul><li class=tag><b>Topics â‡¢</b></li><li class=tag><a href=https://acethecloud.com/tags/cloud_native/>cloud_native</a></li><li class=tag><a href=https://acethecloud.com/tags/appgateway/>appgateway</a></li><li class=tag><a href=https://acethecloud.com/tags/cloud/>cloud</a></li><li class=tag><a href=https://acethecloud.com/tags/nginx/>nginx</a></li><li class=tag><a href=https://acethecloud.com/tags/arm_template/>arm_template</a></li></ul></div></div></div></div></div></section><section class=blog-single><div class=container style=width:100%><div style=width:100%><article class=blog-single-post style=padding:30px><p>Azure Application Gateway is a web traffic load balancer that enables you to manage traffic to your web applications. It includes features such as SSL/TLS offload, HTTP/HTTPS redirection, and cookie-based affinity.</p><p>Nginx is an open-source web server that can also be used as a reverse proxy, load balancer, and HTTP cache. When running Nginx on an Azure Virtual Machine (VM), you have the ability to customize the configuration and install additional modules to suit your needs.</p><p>Here are some key differences between Azure Application Gateway and Nginx running on an Azure VM:</p><ol><li>Managed service vs. self-managed:</li></ol><p>Azure Application Gateway is a fully managed service, while Nginx running on an Azure VM requires you to set up and manage the VM and web server software yourself. This means that with Azure Application Gateway, you don&rsquo;t have to worry about patching, updating, or maintaining the underlying infrastructure.</p><ol start=2><li>Scaling:</li></ol><p>Both Azure Application Gateway and Nginx running on an Azure VM can scale to meet the needs of your application. However, with Azure Application Gateway, you can enable auto-scaling based on metrics such as CPU utilization, while with Nginx on an Azure VM, you would have to manually scale the VM or set up auto-scaling using a solution such as Azure Monitor.</p><ol start=3><li>Performance:</li></ol><p>Azure Application Gateway is optimized for high performance, with features such as multiplexing and HTTP/2 support to improve the speed of web traffic. Nginx can also be configured for high performance, but you will need to tune the configuration and possibly use additional tools such as a cache to achieve optimal performance.</p><ol start=4><li>Features:</li></ol><p>Azure Application Gateway includes a range of features beyond load balancing, such as SSL/TLS offload, which allows you to offload encryption and decryption tasks to the gateway, improving the performance of your backend servers. Nginx can also be configured to provide these features, but you will need to set them up yourself.</p><p>Here is an example of configuring Azure Application Gateway to load balance traffic to two backend servers using the Azure Portal:</p><ol><li><p>In the Azure Portal, navigate to your Application Gateway resource.</p></li><li><p>Click on &ldquo;Backend pools&rdquo; in the left-hand menu.</p></li><li><p>Click the &ldquo;+ Add&rdquo; button to create a new backend pool.</p></li><li><p>Give the backend pool a name, such as &ldquo;MyBackendPool&rdquo;, and select the type of backend servers you want to use (e.g., Azure VMs).</p></li><li><p>Click the &ldquo;+ Add&rdquo; button to add the backend servers to the pool. You can add multiple servers by repeating this step.</p></li><li><p>Click &ldquo;Save&rdquo; to create the backend pool.</p></li><li><p>Click on &ldquo;Listeners&rdquo; in the left-hand menu.</p></li><li><p>Click the &ldquo;+ Add&rdquo; button to create a new listener.</p></li><li><p>Give the listener a name, such as &ldquo;MyListener&rdquo;, and select the protocol and port you want to use (e.g., HTTP on port 80).</p></li><li><p>Select the backend pool you created in step 3 as the target for the listener.</p></li><li><p>Click &ldquo;Save&rdquo; to create the listener.</p></li></ol><p>This is a basic example of how to set up load balancing with Azure Application Gateway. You can configure additional options, such as SSL/TLS offload, by clicking on the corresponding settings in the left-hand menu.</p><p>To deploy an Azure Application Gateway using the Azure CLI, you can use the az network application-gateway create command. This command requires the following arguments:</p><p>&ndash;name: The name of the Application Gateway.
&ndash;resource-group: The name of the resource group to create the Application Gateway in.
&ndash;location: The location to create the Application Gateway in.
&ndash;sku: The SKU of the Application Gateway.
Here is an example of how to use the az network application-gateway create command to create a basic Application Gateway:</p><div class=highlight><div style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az network application-gateway create <span style=color:#4070a0;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#4070a0;font-weight:700></span>    --name myAppGateway <span style=color:#4070a0;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#4070a0;font-weight:700></span>    --resource-group myResourceGroup <span style=color:#4070a0;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#4070a0;font-weight:700></span>    --location eastus <span style=color:#4070a0;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#4070a0;font-weight:700></span>    --sku Standard_v2 <span style=color:#4070a0;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#4070a0;font-weight:700></span>    --instance-count <span style=color:#40a070>2</span> <span style=color:#4070a0;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#4070a0;font-weight:700></span>    --backend-address-pools <span style=color:#4070a0>&#34;name=myBackendPool addresses=10.0.0.1 10.0.0.2&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>This command creates an Application Gateway with two instances and a backend pool with two addresses.</p><p>You can find more information about the az network application-gateway create command and the available options in the Azure CLI documentation <a href="https://docs.microsoft.com/en-us/cli/azure/network/application-gateway/create?view=azure-cli-latest">https://docs.microsoft.com/en-us/cli/azure/network/application-gateway/create?view=azure-cli-latest</a></p><p>Here is an example of configuring Nginx as a load balancer on an Azure VM using the command line:</p><ol><li><p>Install Nginx on your Azure VM. This can be done using the package manager for your operating system (e.g., apt-get on Ubuntu).</p></li><li><p>Create a configuration file for Nginx, typically located at /etc/nginx/nginx.conf.</p></li><li><p>In the configuration file, define the upstream servers that Nginx should load balance traffic to. For example:</p></li></ol><div class=highlight><div style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span>upstream</span> <span>my_upstream</span> {
</span></span><span style=display:flex><span>    <span>server</span> <span>backend1.example.com;</span>
</span></span><span style=display:flex><span>    <span>server</span> <span>backend2.example.com;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><ol start=4><li>Define a virtual server block in the configuration file to specify how Nginx should handle incoming traffic. For example:</li></ol><div class=highlight><div style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span>server</span> {
</span></span><span style=display:flex><span>    <span>listen</span> <span>80;</span>
</span></span><span style=display:flex><span>    <span>server_name</span> <span>example.com;</span>
</span></span><span style=display:flex><span>    <span>location</span> <span>/</span> <span>{</span>
</span></span><span style=display:flex><span>        <span>proxy_pass</span> <span>http:</span><span style=color:#60a0b0;font-style:italic>//my_upstream;
</span></span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic></span>    }
</span></span><span style=display:flex><span><span>}</span>
</span></span></code></pre></td></tr></table></div></div><ol start=5><li>Restart Nginx to apply the changes:</li></ol><div class=highlight><div style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><p>This is a basic example of how to set up Nginx as a load balancer on an Azure VM. You can configure additional options, such as SSL/TLS offload, by adding additional directives to the configuration file.</p><h2 id=cost-efficiency>Cost Efficiency</h2><p>There are a few different factors to consider when comparing the cost of using Azure Application Gateway versus using Nginx as a load balancer on an Azure virtual machine (VM). Some of these factors include the number of requests and data transfer that the load balancer will need to handle, the number of VMs or other resources that the load balancer will be distributing traffic to, and the specific pricing options and discounts that you are eligible for.</p><p>One way to compare the cost of these two options is to use the Azure pricing calculator. This tool allows you to input specific details about your workload, such as the number of requests and data transfer, and see an estimated cost for each option.</p><p>Generally, Azure Application Gateway is a fully managed service that is designed to handle a large volume of traffic and is well-suited for high-scale applications. As a result, it may be more expensive than using Nginx as a load balancer on an Azure VM, especially if you are only handling a small volume of traffic.</p><p>However, there are a few other factors to consider when comparing the cost of these two options. For example, using Azure Application Gateway may be more cost-effective in the long run because it is fully managed and requires minimal maintenance, whereas using Nginx as a load balancer on an Azure VM may require ongoing maintenance and management. Additionally, Azure Application Gateway includes features such as SSL offloading and web application firewall (WAF) capabilities, which may justify the additional cost for some users.</p><p>The cost of running an Nginx load balancer on an Azure virtual machine (VM) will depend on several factors, including the VM size, region, and configuration.</p><p>Here are some estimates based on Azure&rsquo;s pricing calculator:</p><ol><li>For a Basic A1 VM (1 vCPU, 1 GB RAM) in the East US region, the cost would be approximately $32.63 per month.</li><li>For a Standard A2 VM (2 vCPUs, 3.5 GB RAM) in the East US region, the cost would be approximately $65.25 per month.</li><li>For a Standard D4s_v3 VM (4 vCPUs, 16 GB RAM) in the East US region, the cost would be approximately $130.50 per month.</li></ol><p>Keep in mind that these estimates do not include any additional costs for data transfer, storage, or other resources that may be required for your load balancer setup. It&rsquo;s always a good idea to carefully review your costs and adjust your configuration as needed to optimize your budget.</p><p>It&rsquo;s also worth noting that Azure offers a variety of pricing options for both Azure Application Gateway and Azure VMs, including pay-as-you-go, consumption-based, and reserved pricing options. You can use the Azure pricing calculator to compare the cost of each option based on your specific workload and usage patterns.</p><p>In summary, Azure Application Gateway is a fully managed service that provides a range of features for load balancing and managing web traffic, while Nginx on an Azure VM gives you more control and customization options but requires more setup and management.
Which option is best for you will depend on your specific requirements and preferences.</p></article></div><div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3068198368246884" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block data-ad-client=ca-pub-3068198368246884 data-ad-slot=9807437796 data-ad-format=auto data-full-width-responsive=true></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><div class=container style=padding:50px><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//acethecloud.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></section></div><footer class=footer><div class=container><div class=row><div class=col-lg-12><div class=footer-subscribe-title><h2>Get the latest blog updates</h2></div></div><div class="col-lg-8 mx-auto"><form action=# class=footer-subscribe-form><div class=from-group><div class=input-group><input type=email class=form-control placeholder="Enter Your E-mail"><div class=subscribe><button class="btn btn-subscribe" type=submit>
<span class=btn-area>Subscribe</span><svg class="icon-left" xmlns="http://www.w3.org/2000/svg" width="16.317" height="15.323" viewBox="0 0 16.317 15.323"><g data-name="Group 1167"><g data-name="Group 1166"><path data-name="Path 1349" d="M.004 5.359a.7.7.0 00.587.693l6.091 1.609L.591 9.27a.7.7.0 00-.587.693v4.656a.7.7.0 00.206.5.726.726.0 00.119.1.7.7.0 00.675.044l14.911-6.958a.7.7.0 000-1.274L1.004.066a.7.7.0 00-1 .637zm13.952 2.3" fill="#fff"/></g></g></svg><svg class="icon-center" xmlns="http://www.w3.org/2000/svg" width="16.317" height="15.323" viewBox="0 0 16.317 15.323"><g data-name="Group 1167"><g data-name="Group 1166"><path data-name="Path 1349" d="M.004 5.359a.7.7.0 00.587.693l6.091 1.609L.591 9.27a.7.7.0 00-.587.693v4.656a.7.7.0 00.206.5.726.726.0 00.119.1.7.7.0 00.675.044l14.911-6.958a.7.7.0 000-1.274L1.004.066a.7.7.0 00-1 .637zm13.952 2.3" fill="#fff"/></g></g></svg></button></div></div></div></form></div></div><div class=row><div class="col-lg-4 col-md-4"><div class=footer-description><img src=https://acethecloud.com/images/logo.png alt=logo><p>All right reserved</br>Copyright Â© <a href=https://AceTheCloud.com/ target=_blank>AceTheCloud</a> 2022</p><ul class=footer-description-social><li><a href=https://facebook.com/cloud.and.mobile.evangelist/><i class=ti-facebook></i></a></li><li><a href=https://twitter.com/AbhiForTweeting><i class=ti-twitter-alt></i></a></li><li><a href=https://github.com/AbhiOnGithub><i class=ti-github></i></a></li></ul></div></div><div class="col-lg-4 col-md-4"><div class=footer-widget><h4>Sitemap</h4><div class=footer-widget-list><ul><li><a href=https://acethecloud.com>Home</a></li><li><a href=https://acethecloud.com/blog>Latest Article</a></li><li><a href=https://acethecloud.com/privacy>Privacy & Policy</a></li><li><a href=https://acethecloud.com/contact>Contact</a></li></ul></div></div></div><div class="col-lg-4 col-md-4"><div class=footer-widget><h4>Address</h4><div class=footer-widget-list><ul><li><a href=tel:><i class=ti-mobile></i></a></li><li><a href=mailto:abhishek@acethecloud.com><i class=ti-email></i>abhishek@acethecloud.com</a></li><li><p><i class=ti-pin></i></p></li></ul></div></div></div></div></div></footer><link href=https://acethecloud.com/scss/non-critical.min.css rel=stylesheet><script src=https://acethecloud.com/js/vendor.min.js></script>
<script src=https://acethecloud.com/js/script.min.js></script></body></html>